---
layout: post
title:  "超级楼梯问题 -- 再议Fibonacci数列"
date:   2010-08-07
categories: coding
summary: "今天讨论一个经典问题“超级楼梯”，这是一个数学问题，非常适合锻炼逻辑思维能力"
---

*本文转自笔者的LiveSpace，保留了当时的写作日期*

今天讨论一个经典问题“超级楼梯”，这是一个数学问题，非常适合锻炼逻辑思维能力。

问题：现有N阶楼梯，每次可以走一阶楼梯或两阶楼梯，那么走完楼梯一共有多少种走法，1<=N<=15。其实从数学角度出发，N>=0即可。

解答：递推法。设T(n)为走完n阶楼梯全部走法。当从起点走一阶楼梯之后，即剩下n-1阶楼梯，此时走完剩下的 n-1阶楼梯共有T(n-1)种走法；同理，当从起点走两阶楼梯之后，即剩下n-2阶楼梯，此时走完剩下的n-2阶楼梯共有T(n-2)种走法。由于只能走一阶楼梯或两阶楼梯，故走完全部楼梯的走法等于走完n-1阶楼梯的走法加上走完n-2阶楼梯的走法（请自行理解，闹内补完）。

最后，我们得到递推公式T(n)=T(n-1)+T(n-2)。我们且慢讨论n的取值范围以及递推的起始值。乍一看，这个公式和著名的Fibonacci数列如出一辙，简直是一模一样。那么，我们是否可以简单的套用Fibonacci公式来求解超级楼梯问题呢？很遗憾，答案是不能！

为了说明这个问题，我来用一种最简单的枚举法来证明。首先，Fibonacci数列标准公式为F(n)=F(n-1)+F(n-2)， F0=0，F1=1，2<=n。其前8项值为

![53e94c36]({{ site.BASE_PATH }}/assets/cloud/2010/53e94c36.PNG)


而对于超级楼梯问题，T5=8, T6=13，枚举如下

![3058d4e3]({{ site.BASE_PATH }}/assets/cloud/2010/3058d4e3.png)
![79ba96e5]({{ site.BASE_PATH }}/assets/cloud/2010/79ba96e5.png)

注意：Fibonacci下标从0开始，楼梯下标从1开始。其实仔细观察不难发现，T(n)=F(n+1)。故我们可以得到n的取值范围以及起始值，T1=1，T2=2，3<=n<=15。

至此，如果看官是一名程序员，那么大可以写出如下代码解决问题，

{% highlight c %}
// 超级楼梯问题 -- T(n)=T(n-1)+T(n-2), T(1)=1, T(2)=2, 3<=n<=15
int T(int n)
{
    if (n==1)
        return 1;
    else if (n==2)
        return 2;
    else
        return T(n-1) + T(n-2);
}
{% endhighlight %}

注意：代码不理想，因为没有边界检查和出错控制，并且使用了递归算法导致性能不佳，请看官自行补完。

如果看官是一位数学家或者数学爱好者，那么请跟我一起来讨论下面这种解法。感谢法国数学家Jacques Binet给出Fibonacci数列非递推公式![c22108c7]({{ site.BASE_PATH }}/assets/cloud/2010/c22108c7.png)

其中
![121f8c1f]({{ site.BASE_PATH }}/assets/cloud/2010/121f8c1f.png)

很眼熟吧，符号φ（读作Phi）被我们称作[黄金比例](http://en.wikipedia.org/wiki/Golden_ratio)。

代入n=5，n=6，我们来计算一下结果T5= F6= 7.9999999985272988055871659688956，T6= F7= 12.999999997188479537986661771。恩，很理想的值！

回到楼梯问题，让我们来扩展一下。如果每次可以走一阶或两阶或三阶楼梯，那么走完N阶有多少走法呢？这个不难，答案很直观：T(n)=T(n-1)+T(n-2)+T(n-3), T1=1, T2=2, T3=4, 4<=n<=15（请看官自行思考为什么T3=4）。

那么如果每次可以走1,2,3…m阶呢，当然m<n。公式很容易：T(n)=T(n-1)+T(n-2)+…+T(n-m)。但是n的取值范围呢？此时我们需要思考一个问题，面对m阶楼梯，每次可以走1,2,3…m阶楼梯，一共有几种走法，公式是什么（T(m)=?）。请看官自行思考吧:) -- 提示：超级大递归！